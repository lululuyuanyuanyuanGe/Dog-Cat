<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love You 1314 ‚ú®</title>
    
    <!-- DEPENDENCIES -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@500;600;700&family=JetBrains+Mono:wght@400;500;700&family=Outfit:wght@300;400;500;700;800&family=Gloria+Hallelujah&family=Nanum+Pen+Script&display=swap" rel="stylesheet">

    <!-- CONFIG -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        display: ['Clash Display', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                        hand: ['Gloria Hallelujah', 'cursive'],
                        pen: ['Nanum Pen Script', 'cursive'],
                    },
                    colors: {
                        cream: '#FFF9F5',
                        coral: '#FF6B6B',
                        slate: '#4D5061',
                        pastel: {
                            pink: '#FFD6E0',
                            blue: '#C4E4F7',
                            yellow: '#FEF9C3',
                            mint: '#D1FAE5',
                            lavender: '#E9D5FF'
                        },
                        rose: { 50: '#fff1f2', 100: '#ffe4e6', 200:'#fecdd3', 300: '#fda4af', 400:'#fb7185', 500: '#f43f5e', 900: '#881337' }
                    },
                    animation: {
                        'float': 'float 8s ease-in-out infinite',
                        'float-slow': 'float 12s ease-in-out infinite',
                        'pulse-slow': 'pulse 3s infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0) rotate(var(--rot))' },
                            '50%': { transform: 'translateY(-20px) rotate(var(--rot))' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        body { background-color: #FFF9F5; overflow-x: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .heart-grid {
            display: grid;
            grid-template-columns: repeat(31, 1fr); 
            gap: 4px; 
            width: fit-content;
            margin: 0 auto;
        }

        .blob { position: fixed; filter: blur(80px); z-index: -1; opacity: 0.6; }
        
        .glass-hero {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 10px 40px -10px rgba(255, 107, 107, 0.15);
        }

        /* Washi Tape Effect */
        .washi-tape {
            background-color: rgba(255, 255, 255, 0.4);
            background-image: linear-gradient(90deg, transparent 50%, rgba(255,255,255,0.5) 50%);
            background-size: 10px 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            backdrop-filter: blur(5px);
            opacity: 0.8;
        }

        .paper-fold { clip-path: polygon(0 0, 100% 0, 100% 85%, 85% 100%, 0 100%); }
        .paper-corner {
            position: absolute; bottom: 0; right: 0; width: 15%; height: 15%;
            background: linear-gradient(135deg, transparent 50%, rgba(0,0,0,0.1) 50%);
            border-top: 1px solid rgba(0,0,0,0.1);
            border-left: 1px solid rgba(0,0,0,0.1);
            border-radius: 4px 0 0 0;
        }
        
        .sticker-dash {
            background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='999' ry='999' stroke='%23FFD6E0' stroke-width='2' stroke-dasharray='6%2c 6' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e");
        }
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // --- CONFIGURATION ---
    const START_DATE = "2023-05-20T00:00:00"; 
    
    const CURRENT_USER = {
        name: "Xiaolu",
        avatar: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop",
        partnerAvatar: "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop"
    };

    // --- ICONS ---
    const Icon = ({ name, size = 20, className = "" }) => {
        const paths = {
            heart: "M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",
            message: "M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5Z",
            play: "M5 3l14 9-14 9V3z",
            camera: "M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",
            send: "M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z",
            star: "M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",
            sparkles: "M12 2L14.4 7.2L20 9L14.4 10.8L12 16L9.6 10.8L4 9L9.6 7.2L12 2Z",
            file: "M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",
            paperclip: "M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48",
            download: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4 M7 10l5 5 5-5 M12 15V3",
            chevronDown: "M6 9l6 6 6-6",
            chevronRight: "M9 18l6-6-6-6",
            settings: "M12.22 2h-.44a2 2 0 0 1-2 2 2 2 0 0 0-2 2 2 2 0 0 1-2 2 2 2 0 0 0 2 2H2a2 2 0 0 0 2 2 2 2 0 0 1 2 2 2 2 0 0 0 2 2h.44a2 2 0 0 1 2-2 2 2 0 0 0 2-2 2 2 0 0 1 2-2 2 2 0 0 0 2-2h1.34a2 2 0 0 0-2-2 2 2 0 0 1-2-2 2 2 0 0 0-2-2 2 2 0 0 1-2-2 2 2 0 0 0-2-2z M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6z",
            logOut: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4 M16 17l5-5-5-5 M21 12H9"
        };
        return (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d={paths[name] || ""} />
            </svg>
        );
    };

    // --- DOODLES ---
    const DoodleArrow = () => (
        <svg className="w-12 h-12 text-slate/20 absolute -left-12 top-2 rotate-[-20deg]" viewBox="0 0 100 100" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round">
             <path d="M10,50 Q30,10 90,50 M80,40 L90,50 L80,60" />
        </svg>
    );

    const DoodleUnderline = () => (
        <svg className="absolute -bottom-2 left-0 w-full h-3 text-coral/30" viewBox="0 0 200 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.00025 7.00003C51.9084 1.76985 131.956 -3.07849 198.001 5.00003" stroke="currentColor" strokeWidth="3" strokeLinecap="round"/>
        </svg>
    );

    // --- MOCK DATABASE ---
    const RAW_DATA = [
        {
            date: "2025-01-24",
            items: [
                { type: 'photo', size: 'large', src: 'https://images.unsplash.com/photo-1523438885200-e635ba2c371e?w=600&fit=crop', time: '10:42 AM', sticker: { text: "So Yummy!", color: "bg-pastel-yellow", rotate: "-rotate-6" } },
                { type: 'note', size: 'small', content: "The way you looked at the sunset today... I never want to forget that.", bg: 'bg-pastel-blue/30', time: '12:15 PM' },
                { type: 'pdf', size: 'wide', title: "Our_Trip_Itinerary.pdf", sizeLabel: "2.4 MB", time: '02:30 PM' },
                { type: 'video', size: 'medium', src: 'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=600&fit=crop', time: '06:00 PM' }
            ],
            comments: [{ user: "Alice", avatar: "bg-blue-200", text: "Omg this date looks perfect!", time: "16:40" }]
        },
        {
            date: "2025-01-01",
            items: [
                 { type: 'note', size: 'wide', content: "Happy New Year my love! üéÜ Here's to another year of us.", bg: 'bg-pastel-pink/30', time: '00:01 AM' },
                 { type: 'photo', size: 'medium', src: 'https://images.unsplash.com/photo-1513201099705-a9746e1e201f?w=600&fit=crop', time: '00:15 AM' }
            ],
            comments: []
        },
        {
            date: "2024-12-25",
            items: [
                { type: 'photo', size: 'large', src: 'https://images.unsplash.com/photo-1543589077-47d81606c1bf?w=600&fit=crop', time: '09:00 AM' },
                { type: 'pdf', size: 'wide', title: "Christmas_Letter.pdf", sizeLabel: "500 KB", time: '10:30 AM' }
            ],
            comments: []
        },
        {
            date: "2024-05-20",
            items: [
                 { type: 'note', size: 'large', content: "One year anniversary! I can't believe how fast time flies.", bg: 'bg-pastel-yellow/50', time: '08:00 PM' }
            ],
            comments: []
        }
    ];

    // --- DECORATIONS ---
    const BackgroundBlobs = () => (
        <div className="fixed inset-0 pointer-events-none z-[-1]">
            <div className="blob w-96 h-96 bg-pastel-pink rounded-full top-0 left-0 -translate-x-1/2 -translate-y-1/2 animate-float"></div>
            <div className="blob w-80 h-80 bg-pastel-blue rounded-full bottom-0 right-0 translate-x-1/3 translate-y-1/3 animate-float-delayed"></div>
            <div className="blob w-64 h-64 bg-pastel-yellow rounded-full top-1/2 left-1/3 opacity-40 animate-float"></div>
        </div>
    );

    const FloatingSticker = ({ text, top, left, right, bottom, rot, delay }) => (
        <div 
            className="absolute z-0 pointer-events-none animate-float-slow"
            style={{ 
                top, left, right, bottom, 
                '--rot': rot, 
                animationDelay: delay 
            }}
        >
            <div className="bg-white px-5 py-2 rounded-full sticker-dash flex items-center gap-2 transform hover:scale-110 transition-transform duration-500 shadow-sm opacity-60 hover:opacity-100">
                <Icon name="sparkles" size={14} className="text-yellow-400 fill-current" />
                <span className="font-hand text-slate text-sm font-bold whitespace-nowrap">{text}</span>
                <Icon name="heart" size={14} className="text-coral fill-current" />
            </div>
        </div>
    );

    // FIXED: Background Stickers now use FIXED positioning
    const BackgroundDecorations = () => (
        <div className="fixed inset-0 w-full h-full pointer-events-none overflow-hidden z-0">
            <FloatingSticker text="Loving you since May 20th" top="15%" left="5%" rot="-5deg" delay="0s" />
            <FloatingSticker text="My Person üîí" top="25%" right="8%" rot="6deg" delay="2s" />
            <FloatingSticker text="Soulmate üí´" bottom="20%" left="10%" rot="-3deg" delay="4s" />
            <FloatingSticker text="Love U 3000" top="60%" right="15%" rot="4deg" delay="1s" />
            <FloatingSticker text="Best Team ‚úåÔ∏è" bottom="10%" right="30%" rot="-2deg" delay="3s" />
        </div>
    );

    // FIXED: Profile Widget now uses FIXED positioning
    const ProfileWidget = () => {
        const [isOpen, setIsOpen] = useState(false);

        return (
            <div className="fixed top-6 right-6 z-[100]">
                <div 
                    onClick={() => setIsOpen(!isOpen)}
                    className="flex items-center gap-3 bg-white/70 backdrop-blur-xl p-2 pr-5 rounded-full border border-white shadow-lg shadow-slate/5 cursor-pointer hover:bg-white transition-all group"
                >
                    <div className="relative">
                        <div className="w-10 h-10 rounded-full overflow-hidden border-2 border-white ring-2 ring-rose-100">
                            <img src={CURRENT_USER.avatar} alt="User" className="w-full h-full object-cover" />
                        </div>
                        <div className="absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-white rounded-full"></div>
                    </div>
                    
                    <div className="flex flex-col">
                        <span className="text-xs font-bold text-slate/50 uppercase tracking-wider leading-none mb-0.5">Welcome</span>
                        <span className="font-display font-bold text-slate text-sm leading-none group-hover:text-coral transition-colors">{CURRENT_USER.name}</span>
                    </div>
                    
                    <div className={`ml-1 text-slate/40 transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`}>
                        <Icon name="chevronDown" size={14} />
                    </div>
                </div>

                {/* Dropdown Menu */}
                {isOpen && (
                    <div className="absolute top-full right-0 mt-2 w-48 bg-white/90 backdrop-blur-xl rounded-2xl border border-white shadow-xl p-2 animate-in fade-in slide-in-from-top-2 duration-200">
                        <div className="p-2 hover:bg-rose-50 rounded-xl cursor-pointer flex items-center gap-3 text-slate/70 hover:text-coral transition-colors">
                            <Icon name="settings" size={16} />
                            <span className="text-sm font-bold">Settings</span>
                        </div>
                        <div className="p-2 hover:bg-rose-50 rounded-xl cursor-pointer flex items-center gap-3 text-slate/70 hover:text-coral transition-colors">
                            <Icon name="logOut" size={16} />
                            <span className="text-sm font-bold">Log Out</span>
                        </div>
                    </div>
                )}
            </div>
        );
    };

    // --- HERO & TIMER ---
    const HeroHighlight = () => (
        <div className="w-full max-w-4xl mx-auto pt-12 pb-6 px-4 z-10 relative">
            <div className="relative flex flex-col items-center">
                <div className="absolute inset-0 bg-gradient-to-r from-rose-100/30 via-white/50 to-blue-100/30 blur-3xl rounded-full -z-10 transform scale-150"></div>
                <div className="flex items-center gap-4 md:gap-8 mb-6 animate-in fade-in zoom-in duration-1000">
                    <div className="w-20 h-20 md:w-24 md:h-24 rounded-full border-4 border-white shadow-xl overflow-hidden relative group">
                        <img src={CURRENT_USER.partnerAvatar} className="w-full h-full object-cover" />
                    </div>
                    <div className="flex-1 flex flex-col items-center justify-center relative w-24 md:w-32">
                        <div className="w-full border-t-2 border-dashed border-coral/40 absolute top-1/2 -translate-y-1/2"></div>
                        <div className="bg-white p-2 rounded-full border border-rose-100 shadow-sm relative z-10 animate-pulse-slow">
                            <Icon name="heart" size={24} className="text-coral fill-coral" />
                        </div>
                    </div>
                    <div className="w-20 h-20 md:w-24 md:h-24 rounded-full border-4 border-white shadow-xl overflow-hidden relative group">
                        <img src={CURRENT_USER.avatar} className="w-full h-full object-cover" />
                    </div>
                </div>
                <div className="text-center relative">
                    <DoodleArrow />
                    <h1 className="font-display font-bold text-6xl md:text-8xl text-transparent bg-clip-text bg-gradient-to-r from-coral via-rose-500 to-orange-400 tracking-tighter drop-shadow-sm leading-tight">
                        LOVE YOU <br className="md:hidden" /> 1314
                    </h1>
                    <div className="inline-block relative mt-2">
                        <p className="font-hand text-slate/50 text-lg md:text-xl rotate-[-2deg]">( One Life, One Love, Forever )</p>
                        <DoodleUnderline />
                    </div>
                </div>
            </div>
        </div>
    );

    const LoveTimer = () => {
        const [time, setTime] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });
        useEffect(() => {
            const updateTimer = () => {
                const start = new Date(START_DATE).getTime();
                const now = new Date().getTime();
                const distance = now - start;
                setTime({
                    days: Math.floor(distance / (1000 * 60 * 60 * 24)),
                    hours: Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
                    minutes: Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)),
                    seconds: Math.floor((distance % (1000 * 60)) / 1000),
                });
            };
            setInterval(updateTimer, 1000);
            updateTimer();
        }, []);
        const TimeCard = ({ val, label, color, rotate }) => (
            <div className={`relative flex flex-col items-center justify-center w-20 h-24 md:w-28 md:h-32 rounded-2xl border-2 border-white/80 shadow-[0_8px_30px_rgb(0,0,0,0.05)] backdrop-blur-xl ${color} ${rotate} transition-transform hover:scale-110 duration-300`}>
                <div className="text-3xl md:text-5xl font-display font-bold text-slate/80 tabular-nums">{String(val).padStart(2, '0')}</div>
                <div className="text-[10px] md:text-xs font-bold text-slate/50 uppercase tracking-widest mt-1 bg-white/40 px-2 py-0.5 rounded-full">{label}</div>
                <div className="absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-white/40 to-transparent rounded-t-xl pointer-events-none"></div>
            </div>
        );
        return (
            <div className="flex flex-col items-center py-8 z-10 relative">
                <div className="flex gap-3 md:gap-6">
                    <TimeCard val={time.days} label="DAYS" color="bg-pastel-pink/80" rotate="-rotate-2" />
                    <TimeCard val={time.hours} label="HRS" color="bg-pastel-blue/80" rotate="rotate-1" />
                    <TimeCard val={time.minutes} label="MINS" color="bg-pastel-yellow/80" rotate="-rotate-1" />
                    <TimeCard val={time.seconds} label="SECS" color="bg-pastel-mint/80" rotate="rotate-2" />
                </div>
            </div>
        );
    };

    const ContributionHero = () => {
        const { matrix, totalCount } = useMemo(() => {
            const rows = 27; const cols = 31; const grid = [];
            let count = 0;
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    const x = (c / cols) * 3.5 - 1.75; 
                    const y = -((r / rows) * 3.5 - 1.5); 
                    const equation = Math.pow((x*x + y*y - 1), 3) - (x*x * y*y*y);
                    const isInside = equation <= 0;
                    const level = isInside ? (Math.random() > 0.3 ? Math.ceil(Math.random() * 4) : 0) : -1;
                    if(isInside && level > 0) count += (level * 3);
                    grid.push({ id: `${r}-${c}`, isInside, level });
                }
            }
            return { matrix: grid, totalCount: count + 1850 };
        }, []);
        const colors = { '-1': 'opacity-0', 0: 'bg-rose-100/50', 1: 'bg-rose-200', 2: 'bg-rose-300', 3: 'bg-rose-400', 4: 'bg-coral shadow-[0_0_8px_rgba(255,107,107,0.4)]' };
        return (
            <div className="w-full max-w-4xl mx-auto px-4 z-20 relative mb-12">
                <div className="glass-hero rounded-[3rem] p-8 md:p-12 flex flex-col items-center text-center relative overflow-hidden">
                    <div className="absolute top-0 w-32 h-1 bg-gradient-to-r from-coral to-rose-400 rounded-b-full"></div>
                    <div className="relative mb-8 z-10 mt-2">
                        <DoodleArrow />
                        <span className="font-hand text-slate/40 text-lg md:text-xl block mb-1 -rotate-2">We created...</span>
                        <div className="relative inline-block">
                             <h2 className="text-6xl md:text-8xl font-display font-bold text-coral drop-shadow-sm tracking-tight leading-none">{totalCount.toLocaleString()}</h2>
                             <DoodleUnderline />
                        </div>
                        <p className="font-sans font-bold text-slate/30 text-xs md:text-sm tracking-[0.3em] uppercase mt-4">Beautiful Memories Together</p>
                    </div>
                    <div className="heart-grid">
                        {matrix.map((cell) => (
                            <div key={cell.id} className={`w-2 h-2 md:w-2.5 md:h-2.5 rounded-[2px] transition-all duration-300 ${colors[cell.level]} ${cell.isInside ? 'hover:scale-150 hover:z-20 cursor-pointer' : ''}`} />
                        ))}
                    </div>
                </div>
            </div>
        );
    };

    // --- RE-DESIGNED SCRAPBOOK MEMORY CARDS ---
    
    // Washi Tape Decoration
    const WashiTape = ({ className }) => (
        <div className={`absolute w-24 h-6 washi-tape z-20 ${className}`}></div>
    );

    const PhotoCard = ({ item }) => (
        <div className="h-full w-full relative bg-white border-[6px] border-white shadow-md hover:shadow-xl transition-shadow pb-12 rotate-1 hover:rotate-0 duration-300">
            <WashiTape className="-top-3 left-10 rotate-[-2deg]" />
            <div className="w-full h-full overflow-hidden relative bg-gray-100">
                <img src={item.src} className="w-full h-full object-cover" />
            </div>
            {/* Handwritten Caption Area */}
            <div className="absolute bottom-0 left-0 w-full h-12 flex items-center justify-center">
                 <span className="font-pen text-2xl text-slate/80">{item.sticker ? item.sticker.text : "Lovely day"}</span>
            </div>
        </div>
    );

    const NoteCard = ({ item }) => (
        <div className={`p-6 h-full flex flex-col justify-between relative shadow-md hover:shadow-xl transition-transform hover:-translate-y-1 ${item.bg || 'bg-white'} rotate-[-1deg] hover:rotate-0`}>
            {/* Pin or Tape */}
            <div className="absolute -top-3 left-1/2 -translate-x-1/2 w-4 h-4 rounded-full bg-red-400 shadow-sm z-20 border-2 border-white/50"></div>
            
            <p className="font-hand text-slate text-xl leading-relaxed opacity-90 mt-2">"{item.content}"</p>
            <div className="flex justify-between items-center mt-4 border-t border-black/5 pt-2">
                 <div className="flex -space-x-1">
                    <div className="w-6 h-6 rounded-full bg-coral/20 flex items-center justify-center text-[10px]">‚ù§Ô∏è</div>
                </div>
                <span className="font-mono text-[10px] text-slate/40">{item.time}</span>
            </div>
        </div>
    );

    const VideoCard = ({ item }) => (
        <div className="relative w-full h-full group bg-black rounded-xl overflow-hidden shadow-lg border-4 border-white rotate-1 hover:rotate-0 transition-all">
            <img src={item.src} className="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition duration-500" />
            <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                <div className="w-14 h-14 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center border border-white/60 shadow-lg group-hover:scale-110 transition">
                    <Icon name="play" className="text-white fill-white ml-1" />
                </div>
            </div>
            {/* Film Strips decoration */}
            <div className="absolute top-0 left-0 w-full h-4 bg-repeat-x opacity-30" style={{backgroundImage: 'linear-gradient(to right, black 50%, transparent 50%)', backgroundSize: '10px 100%'}}></div>
            <div className="absolute bottom-0 left-0 w-full h-4 bg-repeat-x opacity-30" style={{backgroundImage: 'linear-gradient(to right, black 50%, transparent 50%)', backgroundSize: '10px 100%'}}></div>
        </div>
    );

    const PdfCard = ({ item }) => (
        <div className="h-full w-full relative bg-cream border border-gray-200 p-4 flex flex-col justify-between group-hover:bg-white transition paper-fold shadow-sm hover:shadow-md rotate-[-2deg] hover:rotate-0">
             <div className="absolute -top-3 right-8 text-gray-400 transform rotate-12 z-20"><Icon name="paperclip" size={32} /></div>
             <div className="flex items-start gap-4 mt-2">
                <div className="w-12 h-12 bg-rose-100 rounded-lg flex items-center justify-center text-rose-500 shrink-0 border border-rose-200"><Icon name="file" size={24} /></div>
                <div className="min-w-0">
                    <h4 className="font-bold text-slate text-sm truncate leading-tight mb-1">{item.title}</h4>
                    <span className="text-[10px] font-mono text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded">{item.sizeLabel || 'DOC'}</span>
                </div>
             </div>
             <button className="w-full mt-4 flex items-center justify-center gap-2 py-2 rounded-xl border border-gray-200 text-xs font-bold text-slate/60 hover:bg-coral hover:border-coral hover:text-white transition"><Icon name="download" size={14} /> View File</button>
             <div className="paper-corner"></div>
        </div>
    );

    const ScrapbookItem = ({ item }) => {
        const getSpan = () => {
            if (item.size === 'large') return 'col-span-1 md:col-span-2 md:row-span-2';
            if (item.size === 'wide') return 'col-span-1 md:col-span-2';
            return 'col-span-1';
        };

        // Random slight rotation for that messy look (using item id or time to be deterministic)
        const rot = useMemo(() => Math.floor(Math.random() * 6) - 3, []); 

        return (
            <div 
                className={`relative group transition-all duration-300 ${getSpan()}`}
                style={{ transform: `rotate(${rot}deg)` }}
            >
                <div className="w-full h-full hover:scale-[1.02] hover:rotate-0 transition-transform duration-300 ease-out hover:z-10">
                    {item.type === 'photo' && <PhotoCard item={item} />}
                    {item.type === 'note' && <NoteCard item={item} />}
                    {item.type === 'video' && <VideoCard item={item} />}
                    {item.type === 'pdf' && <PdfCard item={item} />}
                </div>
            </div>
        );
    };

    // --- LEFT RAIL (Timeline) ---
    const TimelineTree = ({ data, activeDate, onSelect }) => {
        const grouped = useMemo(() => {
            const tree = {};
            data.forEach(entry => {
                const date = new Date(entry.date.replace(/-/g, '/'));
                const year = date.getFullYear();
                const month = date.toLocaleString('default', { month: 'long' });
                if (!tree[year]) tree[year] = {};
                if (!tree[year][month]) tree[year][month] = [];
                tree[year][month].push(entry);
            });
            return tree;
        }, [data]);
        const [expandedYears, setExpandedYears] = useState({});
        const toggleYear = (y) => setExpandedYears(prev => ({...prev, [y]: !prev[y]}));

        return (
            <div className="bg-white/40 backdrop-blur-xl rounded-[2rem] p-6 border border-white/60 shadow-sm overflow-hidden sticky top-8">
                <h2 className="font-display text-2xl font-bold text-slate mb-6 flex items-center gap-2">Timeline <Icon name="star" size={14} className="text-coral" /></h2>
                <div className="space-y-4">
                    {Object.keys(grouped).sort((a,b) => b-a).map(year => (
                        <div key={year} className="relative">
                            <button onClick={() => toggleYear(year)} className="flex items-center gap-2 w-full text-left font-display text-xl font-bold text-slate hover:text-coral transition mb-2">
                                <span className="text-xs p-1 bg-white rounded-full shadow-sm">{expandedYears[year] ? <Icon name="chevronDown" size={12}/> : <Icon name="chevronRight" size={12}/>}</span>
                                {year}
                            </button>
                            <div className={`space-y-4 border-l-2 border-dashed border-coral/30 ml-3 pl-4 transition-all duration-300 ${expandedYears[year] ? 'max-h-[500px] opacity-100' : 'max-h-0 opacity-0 overflow-hidden'}`}>
                                {Object.keys(grouped[year]).map(month => (
                                    <div key={month}>
                                        <h4 className="font-mono text-xs font-bold text-slate/50 uppercase mb-2 mt-2">{month}</h4>
                                        <div className="space-y-3">
                                            {grouped[year][month].map(day => (
                                                <div key={day.date} onClick={() => onSelect(day.date)} className={`relative group cursor-pointer flex items-center gap-3 transition-all ${activeDate === day.date ? 'translate-x-2' : 'hover:translate-x-1'}`}>
                                                    <div className={`w-2 h-2 rounded-full ring-2 ring-white transition-colors ${activeDate === day.date ? 'bg-coral ring-coral/30' : 'bg-gray-300'}`}></div>
                                                    <div>
                                                        <span className={`font-display text-lg block leading-none ${activeDate === day.date ? 'text-coral font-bold' : 'text-slate'}`}>{new Date(day.date.replace(/-/g,'/')).getDate()}</span>
                                                        <span className="text-[9px] text-gray-400 font-mono">{new Date(day.date.replace(/-/g,'/')).toLocaleDateString('en-US', {weekday: 'short'})}</span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );
    };

    // --- MAIN APP ---
    const App = () => {
        const [activeDate, setActiveDate] = useState(RAW_DATA[0].date);
        const currentData = RAW_DATA.find(d => d.date === activeDate) || RAW_DATA[0];
        const displayDate = new Date(activeDate.replace(/-/g,'/')).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });

        return (
            <div className="min-h-screen pb-20 relative font-sans text-slate">
                <BackgroundBlobs />
                <BackgroundDecorations />
                
                <ProfileWidget />
                
                <header className="relative z-10 flex flex-col items-center">
                    <HeroHighlight />
                    <LoveTimer />
                    <ContributionHero />
                </header>

                <div className="flex flex-col lg:flex-row gap-8 relative max-w-7xl mx-auto mt-4 z-10 px-4 md:px-8">
                    {/* LEFT RAIL */}
                    <div className="hidden lg:block w-72 shrink-0 h-fit">
                        <TimelineTree data={RAW_DATA} activeDate={activeDate} onSelect={setActiveDate} />
                    </div>

                    {/* MAIN CONTENT */}
                    <main className="flex-1 w-full min-w-0">
                        {/* Day Header */}
                        <div className="mb-8 flex items-end justify-between bg-white/40 backdrop-blur-md p-6 rounded-[2rem] border border-white/50 shadow-sm animate-in fade-in slide-in-from-bottom-4 duration-700">
                            <div>
                                <h2 className="font-display text-3xl md:text-5xl font-bold text-slate mb-2">{displayDate}</h2>
                                <div className="flex gap-2"><span className="bg-pastel-mint px-3 py-1 rounded-full text-xs font-bold text-slate/60 border border-emerald-100">Recorded üåø</span></div>
                            </div>
                            <button className="bg-slate text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition-transform flex items-center gap-2 text-sm group">
                                <div className="bg-white/20 p-1 rounded-full group-hover:rotate-90 transition"><Icon name="camera" size={16} /></div>
                                <span className="hidden md:inline">Add Memory</span>
                            </button>
                        </div>

                        {/* NEW SCRAPBOOK GRID */}
                        <div key={activeDate} className="relative animate-in fade-in zoom-in-95 duration-500 mb-12">
                            {/* Instead of a container, we just use a grid for layout, but visually items are separate */}
                            <div className="grid grid-cols-1 md:grid-cols-3 auto-rows-[250px] gap-8 p-4">
                                {currentData.items.map((item, idx) => <ScrapbookItem key={idx} item={item} />)}
                            </div>

                            {/* GUESTBOOK (Visual Separation) */}
                            <div className="mt-12 bg-white/60 backdrop-blur-2xl rounded-[2.5rem] p-6 md:p-8 border border-white shadow-xl">
                                <div className="flex items-center justify-between mb-6">
                                    <h3 className="text-xs font-bold text-slate/50 uppercase tracking-widest flex items-center gap-2">
                                        <div className="bg-pastel-blue p-1.5 rounded-lg"><Icon name="message" size={14} className="text-slate" /></div> Love Notes
                                    </h3>
                                    <span className="bg-white px-3 py-1 rounded-full text-[10px] font-bold text-slate/40 border border-slate/5 shadow-sm">{currentData.comments.length} NOTES</span>
                                </div>
                                <div className="space-y-4 mb-8 pl-2 border-l-2 border-slate/10">
                                    {currentData.comments.length > 0 ? currentData.comments.map((comment, i) => (
                                        <div key={i} className="flex gap-4 items-start group">
                                            <div className={`w-10 h-10 rounded-full ${comment.avatar} flex-shrink-0 border-2 border-white shadow-md flex items-center justify-center text-lg`}>üòä</div>
                                            <div className="flex-1">
                                                <div className="flex items-baseline gap-2 mb-1">
                                                    <span className="font-bold text-sm text-slate">{comment.user}</span>
                                                    <span className="text-[10px] font-mono text-gray-400 opacity-50">{comment.time}</span>
                                                </div>
                                                <p className="text-sm text-slate/70 leading-relaxed bg-white px-4 py-2 rounded-2xl rounded-tl-none shadow-sm border border-gray-50">{comment.text}</p>
                                            </div>
                                        </div>
                                    )) : <div className="text-sm text-slate/40 italic pl-2">No comments yet. Be the first!</div>}
                                </div>
                                <div className="relative group">
                                    <input type="text" placeholder="Send them some love..." className="w-full bg-white border-2 border-white focus:border-coral/30 rounded-2xl pl-5 pr-14 py-4 text-sm focus:outline-none shadow-[0_4px_10px_rgba(0,0,0,0.03)] transition-all placeholder:text-slate/30" />
                                    <button className="absolute right-2 top-2 bottom-2 bg-gradient-to-tr from-coral to-rose-400 text-white w-12 rounded-xl flex items-center justify-center hover:scale-105 transition-all shadow-md shadow-coral/30"><Icon name="send" size={18} /></button>
                                </div>
                            </div>
                        </div>

                        <div className="h-32 flex flex-col items-center justify-center text-slate/30 text-sm font-hand mt-8 gap-2">
                            <Icon name="heart" size={16} /> To be continued...
                        </div>
                    </main>
                </div>
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>

</body>
</html>